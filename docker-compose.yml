version: "2"
services:
  proxy:
    image: diogok/caddy
    ports:
      - 80:80
      - 443:443
    volumes:
      - ./Caddyfile:/etc/Caddyfile
      - ./config:/etc/biodiv
      - /opt/caddy:/root/.caddy
    networks:
      - biodiv
  biodivui:
    image: diogok/biodiv-ui
    volumes:
      - ./config:/etc/biodiv
    networks:
      - biodiv
    environment:
      BASE: "/ui"
  biodividx:
    image: diogok/biodiv-idx
    volumes:
      - ./config:/etc/biodiv
    networks:
      - biodiv
  taxadata:
    image: diogok/taxadata
    volumes:
      - ./config:/etc/biodiv
    networks:
      - biodiv
  dwcbot:
    image: diogok/dwc-bot
    volumes:
      - ./config:/etc/biodiv
    environment:
      PROXY: "/dwcbot"
    volumes:
      - /var/data/dwc-bot:/var/data/dwc-bot:rw
  dwcservices:
    image: diogok/dwc-services
    networks:
      - biodiv
  elasticsearch:
    image: diogok/elasticsearch
    networks:
      - biodiv
    volumes:
      - /var/data/dwc-elasticsearch/data:/usr/share/elasticsearch/data:rw
networks:
  biodiv:
